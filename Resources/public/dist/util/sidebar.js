define(["app-config","sulusalesshipping/model/shipping"],function(a,b){"use strict";var c=function(){this.sandbox.on("sulu.flow-of-documents.orders.row.clicked",function(a){var b,c;a.route&&(this.sandbox.emit("sulu.router.navigate",a.route),b=a.route.split("/"),c=b[0]+"/"+b[1],this.sandbox.emit("husky.navigation.select-item",c))}.bind(this))},d=function(){this.sandbox.on("husky.datagrid.item.click",function(a){f.call(this,{data:a,callback:function(a,b){this.sandbox.emit("sulu.sidebar.set-widget","/admin/widget-groups/shipping-info?contact="+a+"&account="+b)}.bind(this)})},this)},e=function(){this.sandbox.dom.off("#sidebar"),this.sandbox.dom.on("#sidebar","click",function(a){var b=this.sandbox.dom.data(a.currentTarget,"id");this.sandbox.emit("sulu.router.navigate","contacts/accounts/edit:"+b+"/details"),this.sandbox.emit("husky.navigation.select-item","contacts/accounts")}.bind(this),"#sidebar-account"),this.sandbox.dom.on("#sidebar","click",function(a){var b=this.sandbox.dom.data(a.currentTarget,"id");this.sandbox.emit("sulu.router.navigate","contacts/contacts/edit:"+b+"/details"),this.sandbox.emit("husky.navigation.select-item","contacts/contacts")}.bind(this),"#sidebar-contact")},f=function(a){if(a&&a.data&&a.callback&&"function"==typeof a.callback){var c,d=b.findOrCreate({id:a.data});d.fetch({success:function(b){c=b.toJSON(),c.order.account&&c.order.contact?a.callback(c.order.contact.id,c.order.account.id):this.sandbox.logger.error("received invalid data when initializing sidebar",c)}.bind(this),error:function(){this.sandbox.logger.error("error while fetching order")}.bind(this)})}else this.sandbox.logger.error("param for getDataForListSidebar has to be an object with a data attribute and a valid callback (attribute)!")};return{initForDetail:function(b,d){var f,g,h="/admin/widget-groups/shipping-detail{?params*}";this.sandbox=b,d.order.contact&&d.order.account&&d.status?(g=this.sandbox.uritemplate.parse(h),f=g.expand({params:{id:d.id,number:d.number,contact:d.order.contact.id,account:d.order.account.id,status:d.status.status,locale:a.getUser().locale,date:d.expectedDeliveryDate,orderDate:d.order.orderDate,orderNumber:d.order.number,orderId:d.order.id}}),this.sandbox.emit("sulu.sidebar.set-widget",f),e.call(this),c.call(this)):this.sandbox.logger.error("required values for sidebar not present!")},initForList:function(a){this.sandbox=a,e.call(this),d.call(this)}}});