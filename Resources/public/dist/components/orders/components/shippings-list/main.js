define(function(){"use strict";var a=function(){this.sandbox.on("sulu.list-toolbar.delete",function(){this.sandbox.emit("husky.datagrid.items.get-selected",function(a){this.sandbox.emit("sulu.salesshipping.shipping.delete",a)}.bind(this))},this),this.sandbox.on("sulu.list-toolbar.add",function(){this.sandbox.emit("sulu.salesshipping.shipping.new",this.orderId)},this)};return{view:!0,layout:{sidebar:{width:"fixed",cssClasses:"sidebar-padding-50"}},templates:["/admin/shipping/template/shipping/list"],initialize:function(){this.orderId=null,this.render(),a.call(this),this.initSidebar()},initSidebar:function(){var a="/admin/widget-groups/order-detail",b=this.options.data;b.contact&&b.account&&b.status?(a+="?contact="+b.contact.id+"&account="+b.account.id+"&status="+b.status.status,this.sandbox.emit("sulu.sidebar.set-widget",a)):this.sandbox.logger.error("required values for sidebar not present!")},render:function(){this.orderId=this.options.data.id,this.sandbox.dom.html(this.$el,this.renderTemplate("/admin/shipping/template/shipping/list")),this.sandbox.sulu.initListToolbarAndList.call(this,"orderShippingFields","/admin/api/shippings/fields?context=order",{el:this.$find("#list-toolbar-container"),instanceName:"shippings",inHeader:!0,template:"default"},{el:this.sandbox.dom.find("#shippings-list",this.$el),url:"/admin/api/shippings?flat=true&orderId="+this.orderId,searchInstanceName:"shippings",searchFields:["fullName"],resultKey:"shippings",viewOptions:{table:{icons:[{icon:"pencil",column:"number",align:"left",callback:function(a){this.sandbox.emit("sulu.salesshipping.shipping.load",a,this.orderId)}.bind(this)}],highlightSelected:!0,fullWidth:!1}}})}}});